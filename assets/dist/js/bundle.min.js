function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):t.initFontIconPickerNode=e(t.jQuery)}(this,function(t){"use strict";function c(t){return(c="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return _typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof(t)})(t)}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s={theme:"fip-grey",source:!1,emptyIcon:!0,emptyIconValue:"",autoClose:!0,iconsPerPage:20,hasSearch:!0,searchSource:!1,appendTo:"self",useAttribute:!1,attributeName:"data-icon",convertToHex:!0,allCategoryText:"From all categories",unCategorizedText:"Uncategorized",iconGenerator:null,windowDebounceDelay:150,searchPlaceholder:"Search Icons"},a=t=t&&t.hasOwnProperty("default")?t.default:t,n=0;function o(t,e){this.element=a(t),this.settings=a.extend({},s,e),this.settings.emptyIcon&&this.settings.iconsPerPage--,this.iconPicker=a("<div/>",{class:"icons-selector",style:"position: relative",html:this._getPickerTemplate(),attr:{"data-fip-origin":this.element.attr("id")}}),this.iconContainer=this.iconPicker.find(".fip-icons-container"),this.searchIcon=this.iconPicker.find(".selector-search i"),this.selectorPopup=this.iconPicker.find(".selector-popup-wrap"),this.selectorButton=this.iconPicker.find(".selector-button"),this.iconsSearched=[],this.isSearch=!1,this.totalPage=1,this.currentPage=1,this.currentIcon=!1,this.iconsCount=0,this.open=!1,this.guid=n++,this.eventNameSpace=".fontIconPicker".concat(n),this.searchValues=[],this.availableCategoriesSearch=[],this.triggerEvent=null,this.backupSource=[],this.backupSearch=[],this.isCategorized=!1,this.selectCategory=this.iconPicker.find(".icon-category-select"),this.selectedCategory=!1,this.availableCategories=[],this.unCategorizedKey=null,this.init()}function e(t){return!(!(s=t).fn||(!s.fn||!s.fn.fontIconPicker)&&(s.fn.fontIconPicker=function(e){var i=this;return this.each(function(){s.data(this,"fontIconPicker")||s.data(this,"fontIconPicker",new o(this,e))}),this.setIcons=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];i.each(function(){s.data(this,"fontIconPicker").setIcons(t,e)})},this.setIcon=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i.each(function(){s.data(this,"fontIconPicker").setIcon(t)})},this.destroyPicker=function(){i.each(function(){s.data(this,"fontIconPicker")&&(s.data(this,"fontIconPicker").destroy(),s.removeData(this,"fontIconPicker"))})},this.refreshPicker=function(t){t||(t=e),i.destroyPicker(),i.each(function(){s.data(this,"fontIconPicker")||s.data(this,"fontIconPicker",new o(this,t))})},this.repositionPicker=function(){i.each(function(){s.data(this,"fontIconPicker").resetPosition()})},this.setPage=function(t){i.each(function(){s.data(this,"fontIconPicker").setPage(t)})},this},0));var s}return o.prototype={init:function(){this.iconPicker.addClass(this.settings.theme),this.iconPicker.css({left:-9999}).appendTo("body");var t=this.iconPicker.outerHeight(),e=this.iconPicker.outerWidth();this.iconPicker.css({left:""}),this.element.before(this.iconPicker),this.element.css({visibility:"hidden",top:0,position:"relative",zIndex:"-1",left:"-"+e+"px",display:"inline-block",height:t+"px",width:e+"px",padding:"0",margin:"0 -"+e+"px 0 0",border:"0 none",verticalAlign:"top",float:"none"}),this.element.is("select")||(this.triggerEvent="input"),!this.settings.source&&this.element.is("select")?this._populateSourceFromSelect():this._initSourceIndex(),this._loadCategories(),this._loadIcons(),this._initDropDown(),this._initCategoryChanger(),this._initPagination(),this._initIconSearch(),this._initIconSelect(),this._initAutoClose(),this._initFixOnResize()},setIcons:function(t,e){this.settings.source=Array.isArray(t)?i(t):a.extend({},t),this.settings.searchSource=Array.isArray(e)?i(e):a.extend({},e),this._initSourceIndex(),this._loadCategories(),this._resetSearch(),this._loadIcons()},setIcon:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this._setSelectedIcon(t)},destroy:function(){this.iconPicker.off().remove(),this.element.css({visibility:"",top:"",position:"",zIndex:"",left:"",display:"",height:"",width:"",padding:"",margin:"",border:"",verticalAlign:"",float:""}),a(window).off("resize"+this.eventNameSpace),a("html").off("click"+this.eventNameSpace)},resetPosition:function(){this._fixOnResize()},setPage:function(t){"first"==t&&(t=1),"last"==t&&(t=this.totalPage),t=parseInt(t,10),isNaN(t)&&(t=1),t>this.totalPage&&(t=this.totalPage),t<1&&(t=1),this.currentPage=t,this._renderIconContainer()},_initFixOnResize:function(){var i,s,n,t=this;a(window).on("resize"+this.eventNameSpace,(i=function(){t._fixOnResize()},s=this.settings.windowDebounceDelay,function(){var t=this,e=arguments;clearTimeout(n),n=setTimeout(function(){return i.apply(t,e)},s)}))},_initAutoClose:function(){var i=this;this.settings.autoClose&&a("html").on("click"+this.eventNameSpace,function(t){var e=t.target;i.selectorPopup.has(e).length||i.selectorPopup.is(e)||i.iconPicker.has(e).length||i.iconPicker.is(e)||i.open&&i._toggleIconSelector()})},_initIconSelect:function(){var i=this;this.selectorPopup.on("click",".fip-box",function(t){var e=a(t.currentTarget);i._setSelectedIcon(e.attr("data-fip-value")),i._toggleIconSelector()})},_initIconSearch:function(){var s=this;this.selectorPopup.on("input",".icons-search-input",function(t){var i=a(t.currentTarget).val();""!==i?(s.searchIcon.removeClass("fip-icon-search"),s.searchIcon.addClass("fip-icon-cancel"),s.isSearch=!0,s.currentPage=1,s.iconsSearched=[],a.grep(s.searchValues,function(t,e){if(0<=t.toLowerCase().search(i.toLowerCase()))return s.iconsSearched[s.iconsSearched.length]=s.settings.source[e],!0}),s._renderIconContainer()):s._resetSearch()}),this.selectorPopup.on("click",".selector-search .fip-icon-cancel",function(){s.selectorPopup.find(".icons-search-input").focus(),s._resetSearch()})},_initPagination:function(){var e=this;this.selectorPopup.on("click",".selector-arrow-right",function(t){e.currentPage<e.totalPage&&(e.currentPage=e.currentPage+1,e._renderIconContainer())}),this.selectorPopup.on("click",".selector-arrow-left",function(t){1<e.currentPage&&(e.currentPage=e.currentPage-1,e._renderIconContainer())})},_initCategoryChanger:function(){var n=this;this.selectorPopup.on("change keyup",".icon-category-select",function(t){if(!1===n.isCategorized)return!1;var e=a(t.currentTarget),i=e.val();if("all"===e.val())n.settings.source=n.backupSource,n.searchValues=n.backupSearch;else{var s=parseInt(i,10);n.availableCategories[s]&&(n.settings.source=n.availableCategories[s],n.searchValues=n.availableCategoriesSearch[s])}n._resetSearch(),n._loadIcons()})},_initDropDown:function(){var e=this;this.selectorButton.on("click",function(t){e._toggleIconSelector()})},_getPickerTemplate:function(){return'\n<div class="selector" data-fip-origin="'.concat(this.element.attr("id"),'">\n\t<span class="selected-icon">\n\t\t<i class="fip-icon-block"></i>\n\t</span>\n\t<span class="selector-button">\n\t\t<i class="fip-icon-down-dir"></i>\n\t</span>\n</div>\n<div class="selector-popup-wrap" data-fip-origin="').concat(this.element.attr("id"),'">\n\t<div class="selector-popup" style="display: none;"> ').concat(this.settings.hasSearch?'<div class="selector-search">\n\t\t\t<input type="text" name="" value="" placeholder="'.concat(this.settings.searchPlaceholder,'" class="icons-search-input"/>\n\t\t\t<i class="fip-icon-search"></i>\n\t\t</div>'):"",'\n\t\t<div class="selector-category">\n\t\t\t<select name="" class="icon-category-select" style="display: none"></select>\n\t\t</div>\n\t\t<div class="fip-icons-container"></div>\n\t\t<div class="selector-footer" style="display:none;">\n\t\t\t<span class="selector-pages">1/2</span>\n\t\t\t<span class="selector-arrows">\n\t\t\t\t<span class="selector-arrow-left" style="display:none;">\n\t\t\t\t\t<i class="fip-icon-left-dir"></i>\n\t\t\t\t</span>\n\t\t\t\t<span class="selector-arrow-right">\n\t\t\t\t\t<i class="fip-icon-right-dir"></i>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>')},_initSourceIndex:function(){if("object"===c(this.settings.source)){if(Array.isArray(this.settings.source))this.isCategorized=!1,this.selectCategory.html("").hide(),this.settings.source=a.map(this.settings.source,function(t,e){return"function"==typeof t.toString?t.toString():t}),Array.isArray(this.settings.searchSource)?this.searchValues=a.map(this.settings.searchSource,function(t,e){return"function"==typeof t.toString?t.toString():t}):this.searchValues=this.settings.source.slice(0);else{var t=a.extend(!0,{},this.settings.source);for(var e in this.settings.source=[],this.searchValues=[],this.availableCategoriesSearch=[],this.selectedCategory=!1,this.availableCategories=[],this.unCategorizedKey=null,this.isCategorized=!0,this.selectCategory.html(""),t){var i=this.availableCategories.length,s=a("<option />");for(var n in s.attr("value",i),s.html(e),this.selectCategory.append(s),this.availableCategories[i]=[],this.availableCategoriesSearch[i]=[],t[e]){var o=t[e][n],r=this.settings.searchSource&&this.settings.searchSource[e]&&this.settings.searchSource[e][n]?this.settings.searchSource[e][n]:o;"function"==typeof o.toString&&(o=o.toString()),o&&o!==this.settings.emptyIconValue&&(this.settings.source.push(o),this.availableCategories[i].push(o),this.searchValues.push(r),this.availableCategoriesSearch[i].push(r))}}}this.backupSource=this.settings.source.slice(0),this.backupSearch=this.searchValues.slice(0)}},_populateSourceFromSelect:function(){var o=this;this.settings.source=[],this.settings.searchSource=[],this.element.find("optgroup").length?(this.isCategorized=!0,this.element.find("optgroup").each(function(t,e){var n=o.availableCategories.length,i=a("<option />");i.attr("value",n),i.html(a(e).attr("label")),o.selectCategory.append(i),o.availableCategories[n]=[],o.availableCategoriesSearch[n]=[],a(e).find("option").each(function(t,e){var i=a(e).val(),s=a(e).html();i&&i!==o.settings.emptyIconValue&&(o.settings.source.push(i),o.availableCategories[n].push(i),o.searchValues.push(s),o.availableCategoriesSearch[n].push(s))})}),this.element.find("> option").length&&this.element.find("> option").each(function(t,e){var i=a(e).val(),s=a(e).html();if(!i||""===i||i==o.settings.emptyIconValue)return!0;null===o.unCategorizedKey&&(o.unCategorizedKey=o.availableCategories.length,o.availableCategories[o.unCategorizedKey]=[],o.availableCategoriesSearch[o.unCategorizedKey]=[],a("<option />").attr("value",o.unCategorizedKey).html(o.settings.unCategorizedText).appendTo(o.selectCategory)),o.settings.source.push(i),o.availableCategories[o.unCategorizedKey].push(i),o.searchValues.push(s),o.availableCategoriesSearch[o.unCategorizedKey].push(s)})):this.element.find("option").each(function(t,e){var i=a(e).val(),s=a(e).html();i&&(o.settings.source.push(i),o.searchValues.push(s))}),this.backupSource=this.settings.source.slice(0),this.backupSearch=this.searchValues.slice(0)},_loadCategories:function(){!1!==this.isCategorized&&(a('<option value="all">'+this.settings.allCategoryText+"</option>").prependTo(this.selectCategory),this.selectCategory.show().val("all").trigger("change"))},_loadIcons:function(){this.iconContainer.html('<i class="fip-icon-spin3 animate-spin loading"></i>'),Array.isArray(this.settings.source)&&this._renderIconContainer()},_iconGenerator:function(t){return"function"==typeof this.settings.iconGenerator?this.settings.iconGenerator(t):"<i "+(this.settings.useAttribute?this.settings.attributeName+'="'+(this.settings.convertToHex?"&#x"+parseInt(t,10).toString(16)+";":t)+'"':'class="'+t+'"')+"></i>"},_renderIconContainer:function(){var t,e=this,i=[];if(i=this.isSearch?this.iconsSearched:this.settings.source,this.iconsCount=i.length,this.totalPage=Math.ceil(this.iconsCount/this.settings.iconsPerPage),1<this.totalPage?(this.selectorPopup.find(".selector-footer").show(),this.currentPage<this.totalPage?this.selectorPopup.find(".selector-arrow-right").show():this.selectorPopup.find(".selector-arrow-right").hide(),1<this.currentPage?this.selectorPopup.find(".selector-arrow-left").show():this.selectorPopup.find(".selector-arrow-left").hide()):this.selectorPopup.find(".selector-footer").hide(),this.selectorPopup.find(".selector-pages").html(this.currentPage+"/"+this.totalPage+" <em>("+this.iconsCount+")</em>"),t=(this.currentPage-1)*this.settings.iconsPerPage,this.settings.emptyIcon)this.iconContainer.html('<span class="fip-box" data-fip-value="fip-icon-block"><i class="fip-icon-block"></i></span>');else{if(i.length<1)return void this.iconContainer.html('<span class="icons-picker-error" data-fip-value="fip-icon-block"><i class="fip-icon-block"></i></span>');this.iconContainer.html("")}i=i.slice(t,t+this.settings.iconsPerPage);for(var s,n=function(t,i){var s=i;a.grep(e.settings.source,a.proxy(function(t,e){return t===i&&(s=this.searchValues[e],!0)},e)),a("<span/>",{html:e._iconGenerator(i),attr:{"data-fip-value":i},class:"fip-box",title:s}).appendTo(e.iconContainer)},o=0;s=i[o++];)n(0,s);if(this.settings.emptyIcon||this.element.val()&&-1!==a.inArray(this.element.val(),this.settings.source))if(-1===a.inArray(this.element.val(),this.settings.source))this._setSelectedIcon("");else{var r=this.element.val();r===this.settings.emptyIconValue&&(r="fip-icon-block"),this._setSelectedIcon(r)}else this._setSelectedIcon(i[0])},_setHighlightedIcon:function(){this.iconContainer.find(".current-icon").removeClass("current-icon"),this.currentIcon&&this.iconContainer.find('[data-fip-value="'+this.currentIcon+'"]').addClass("current-icon")},_setSelectedIcon:function(t){"fip-icon-block"===t&&(t="");var e=this.iconPicker.find(".selected-icon");""===t?e.html('<i class="fip-icon-block"></i>'):e.html(this._iconGenerator(t));var i=this.element.val();this.element.val(""===t?this.settings.emptyIconValue:t),i!==t&&(this.element.trigger("change"),null!==this.triggerEvent&&this.element.trigger(this.triggerEvent)),this.currentIcon=t,this._setHighlightedIcon()},_repositionIconSelector:function(){var t=this.iconPicker.offset(),e=t.top+this.iconPicker.outerHeight(!0),i=t.left;this.selectorPopup.css({left:i,top:e})},_fixWindowOverflow:function(){var t=this.selectorPopup.find(".selector-popup").is(":visible");t||this.selectorPopup.find(".selector-popup").show();var e=this.selectorPopup.outerWidth(),i=a(window).width(),s=this.selectorPopup.offset().left,n="self"==this.settings.appendTo?this.selectorPopup.parent().offset():a(this.settings.appendTo).offset();if(t||this.selectorPopup.find(".selector-popup").hide(),i-20<s+e){var o=this.selectorButton.offset().left+this.selectorButton.outerWidth(),r=Math.floor(o-e-1);r<0?this.selectorPopup.css({left:i-20-e-n.left}):this.selectorPopup.css({left:r})}},_fixOnResize:function(){"self"!==this.settings.appendTo&&this._repositionIconSelector(),this._fixWindowOverflow()},_toggleIconSelector:function(){this.open=this.open?0:1,this.open&&("self"!==this.settings.appendTo&&(this.selectorPopup.appendTo(this.settings.appendTo).css({zIndex:1e3}).addClass("icons-selector "+this.settings.theme),this._repositionIconSelector()),this._fixWindowOverflow()),this.selectorPopup.find(".selector-popup").slideToggle(300,a.proxy(function(){this.iconPicker.find(".selector-button i").toggleClass("fip-icon-down-dir"),this.iconPicker.find(".selector-button i").toggleClass("fip-icon-up-dir"),this.open?this.selectorPopup.find(".icons-search-input").trigger("focus").trigger("select"):this.selectorPopup.appendTo(this.iconPicker).css({left:"",top:"",zIndex:""}).removeClass("icons-selector "+this.settings.theme)},this))},_resetSearch:function(){this.selectorPopup.find(".icons-search-input").val(""),this.searchIcon.removeClass("fip-icon-cancel"),this.searchIcon.addClass("fip-icon-search"),this.currentPage=1,this.isSearch=!1,this._renderIconContainer()}},t&&t.fn&&e(t),function(t){return e(t)}}),function(o){function i(t){t.find(".rhicomoon-select-field ").each(function(){var e=o(this).fontIconPicker();o.ajax({url:rhicomoon.icoMoonJsonFile?rhicomoon.icoMoonJsonFile:o(this).data("json-url"),type:"GET",dataType:"json"}).done(function(t){var i=t.preferences.fontPref.prefix,s=[],n=[];o.each(t.icons,function(t,e){s.push(i+e.properties.name),e.icon&&e.icon.tags&&e.icon.tags.length?n.push(e.properties.name+" "+e.icon.tags.join(" ")):n.push(e.properties.name)}),e.setIcons(s,n)}).fail(function(){console.log("Error icons not loaded")})})}void 0!==acf.add_action?(acf.add_action("ready_field/type=icomoon_select",i),acf.add_action("append_field/type=icomoon_select",i)):o(document).on("acf/setup_fields",function(t,e){o(e).find('.field[data-field_type="icomoon_select"]').each(function(){i(o(this))})})}(jQuery);